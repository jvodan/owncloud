{
	"identifier": "owncloud",
	"about": {
		"title": "owncloud",
		"explanation": "owncloud test"
	},
	"configuration": {
		"admin_password": "^^random(8)^^"
	},
	"system_packages": {
		"adds": [
			"mariadb-client",
			"php-json",
			"php-mbstring",
			"php-imagick",
			"php-curl",
			"php-gd",
			"libicu-dev",
			"php-net-ftp",
			"php-ldap",
			"php-apcu",
			"mcrypt",
			"libmcrypt-dev"
		]
	},
	"modules": {
		"php": [
			"mysql",
			"mbstring",
			"gd2",
			"zip",
			"openssl",
			"intl"
		],
		"apache": [
			"rewrite",
			"negotiation",
			"headers"
		]
	},
	"volumes": [
		{
			"destination": "/var/www/owncloud/config/",
			"source": "/var/lib/containers/^^identifier^^/config"
		},
		{
			"destination": "/var/www/data",
			"source": "/var/lib/containers/^^identifier^^/data"
		},
		{
			"destination": "/var/www/owncloud/apps",
			"source": "/var/lib/containers/^^identifier^^/apps"
		},
		{
			"destination": "/var/www/owncloud/apps-external",
			"source": "/var/lib/containers/^^identifier^^/apps-external"
		}
	],
	"bindings": [
		{
			"type": "embed",
			"target": {
				"repository": "https://github.com/v2Blueprints/ap_php7"
			},
			"configuration": {
				"TZ": "Australia/Sydney",
				"port": 8880,
				"ServerAdmin": "Owncloud Admin"
			}
		},{
			"type": "embed",
			"target": {
				"repository": "https://github.com/v2Blueprints/wap"
			}
		},	
		{
			"target": {
				"repository": "https://github.com/v2Blueprints/mariadb"
			}
		}
	],
	"images": [
		{
			"type": "docker",
			"image": "engines/debian"
		}
	],
	"executions": [
		{
			"type": "docker",
			"CMD": "/usr/local/bin/start.sh"
		}
		],		
	"container": {
		"docker": {
			"user": "www",
			"domainname": "^^domain.qualified_name^^",
			"host": "^^identifier^^",
			"working_dir": "/var/www/",
			"restart": "unless-stopped",
			"max_retry_count": 5, 
			"dns": "^^system_config.dns_servers",
			"dns_search": "spaces.internal",
			"memory" : "1024M",
			"label": [ { "user_def_a": "value_a"} , { "user_def_b": "value_b"} ],
			"shm_size" : "100M",
			 "ports" : { "internal" : 8000, "external" : 8000}
		}
	},
		"other_packages": [
			{
				"target": {
					"repository": "https://download.owncloud.org/community/owncloud-latest.tar.bz2"
				},
				"extraction": "tar -xpf",
				"extracted_path": "owncloud",
				"destination": "/var/www/owncloud"
			}
		]
	}
